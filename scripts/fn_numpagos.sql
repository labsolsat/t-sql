use BANCO
go
drop function numpagos;
go

CREATE FUNCTION numpagos(@NPRESTAMO AS VARCHAR(4))
RETURNS INT
AS
BEGIN
DECLARE @NPAGO INT

SELECT @NPAGO=COUNT(NUMPAGO) FROM PAGO
GROUP BY NUMPRESTAMO
HAVING NUMPRESTAMO=@NPRESTAMO
ORDER BY NUMPRESTAMO


RETURN @NPAGO
END
GO

select dbo.numpagos('P-17');
go

